(this.webpackJsonpmy_picture=this.webpackJsonpmy_picture||[]).push([[3],{104:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(8),i=n.n(a),c=(n(104),n(105),n(15)),u=n(27),l=n(4),s=n(16),p=n(134),f=n(54),b=n(57);function m(){var e=Object(c.a)(["\n  margin-left: 15px;\n"]);return m=function(){return e},e}function y(){var e=Object(c.a)(["\n  margin-right: 20px;\n  margin-left: auto;\n"]);return y=function(){return e},e}function h(){var e=Object(c.a)(["\n  margin: 10px 0;\n  padding-right: 10px;\n  font-size: 30px;\n  font-family: iconfont;\n  cursor: pointer;\n  "]);return h=function(){return e},e}function O(){var e=Object(c.a)(["\n  margin: 0 auto; \n  color: #444;\n"]);return O=function(){return e},e}function g(){var e=Object(c.a)(["\n  margin-left: 25px;\n  text-decoration: none;\n  cursor: pointer;\n  color: #444;\n \n  &.active {\n    border-bottom: 1px solid #444;\n  }\n"]);return g=function(){return e},e}function j(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #ddd;\n"]);return j=function(){return e},e}var d=s.a.header(j()),v=Object(s.a)(u.b)(g()),w=s.a.h1(O()),U=s.a.p(h()),E=s.a.nav(y()),P=Object(s.a)(p.a)(m()),k=Object(b.a)((function(){var e=Object(f.a)(),t=e.UserStore,n=e.AuthStore,r=Object(l.f)();return o.a.createElement(d,null,o.a.createElement(v,{to:"/",exact:!0},"\u9996\u9875"),o.a.createElement(v,{to:"/upload"},"\u4e0a\u4f20\u56fe\u7247"),o.a.createElement(v,{to:"/history"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(v,{to:"/about"},"\u5173\u4e8e\u6211"),o.a.createElement(w,null,"My Picture"),o.a.createElement(E,null,o.a.createElement(U,null,"\ue61b")),o.a.createElement("div",null,t.currentUser?o.a.createElement(o.a.Fragment,null,t.currentUser.attributes.username," ",o.a.createElement(P,{type:"primary",onClick:function(){n.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{type:"primary",onClick:function(){r.push("/login")}},"\u767b\u5f55"),o.a.createElement(P,{type:"primary",onClick:function(){r.push("/register")}},"\u6ce8\u518c"))))}));function x(){var e=Object(c.a)(["\n  padding: 5px 100px;\n  margin: 0;\n  text-align: center;\n  font-size: 12px;\n  color: #bfb2a7;\n"]);return x=function(){return e},e}var z=s.a.footer(x()),F=function(){return o.a.createElement(z,null,o.a.createElement("p",null,"My Picture \u8bb0\u5f55\u4f60\u7684\u6bcf\u4e00\u6b21\u6539\u53d8"))},D=Object(r.lazy)((function(){return n.e(9).then(n.bind(null,360))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(10)]).then(n.bind(null,370))})),M=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,361))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,362))})),C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,363))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(13)]).then(n.bind(null,364))}));var H=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null,"Loading!!")},o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:D}),o.a.createElement(l.a,{path:"/upload",exact:!0,component:A}),o.a.createElement(l.a,{path:"/about",component:M}),o.a.createElement(l.a,{path:"/history",component:S}),o.a.createElement(l.a,{path:"/login",component:I}),o.a.createElement(l.a,{path:"/register",component:C})))),o.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(74);i.a.render(o.a.createElement(u.a,null,o.a.createElement(K.a,null,o.a.createElement("title",null,"My Picture")),o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(9),o=n(17),a=n(18),i=n(3),c=(n(33),n(1)),u=n(14),l=n.n(u);l.a.init({appId:"o3xTmjdOxCnGbv1wtQMfYAqb-gzGzoHsz",appKey:"gKpmEbU2uP9fkKwRvahVtbiR",serverURL:"https://o3xtmjdo.lc-cn-n1-shared.com"});var s,p,f=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){console.log("\u6ce8\u518c\u6210\u529f"),e(t)}),(function(e){t(e)}))}))},b=function(e,t){return new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},m=function(){u.User.logOut()},y=function(){return u.User.current()},h={add:function(e,t){var n=new l.a.Object("Image"),r=new l.a.File(t,e);return n.set("filename",t),n.set("owner",u.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,a=new l.a.Query("Image");return a.include("owner"),a.limit(o),a.skip(n*o),a.equalTo("owner",u.User.current()),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Image=h;var O,g,j,d,v,w,U,E,P,k,x,z,F=new(s=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"currentUser",p,this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=y()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),p=Object(i.a)(s.prototype,"currentUser",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(i.a)(s.prototype,"pullUser",[c.f],Object.getOwnPropertyDescriptor(s.prototype,"pullUser"),s.prototype),Object(i.a)(s.prototype,"resetUser",[c.f],Object.getOwnPropertyDescriptor(s.prototype,"resetUser"),s.prototype),s),D=n(135),S=new(O=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"file",g,this),Object(r.a)(this,"filename",j,this),Object(r.a)(this,"serverFile",d,this),Object(r.a)(this,"isUploading",v,this),Object(r.a)(this,"id",w,this)}return Object(a.a)(e,[{key:"setFile",value:function(e){this.file=e}},{key:"setFilename",value:function(e){this.filename=e}},{key:"upload",value:function(){var e=this;return this.serverFile=null,this.isUploading=!0,new Promise((function(t,n){h.add(e.file,e.filename).then((function(n){console.log("\u4e0a\u4f20\u6210\u529f"),e.serverFile=n,e.id=n.createAt.id,t(n)})).catch((function(e){D.a.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){return e.isUploading=!1}))}))}},{key:"reset",value:function(){this.serverFile=null,this.isUploading=!1}}]),e}(),g=Object(i.a)(O.prototype,"file",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(i.a)(O.prototype,"filename",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=Object(i.a)(O.prototype,"serverFile",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(i.a)(O.prototype,"isUploading",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(i.a)(O.prototype,"id",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(i.a)(O.prototype,"setFile",[c.f],Object.getOwnPropertyDescriptor(O.prototype,"setFile"),O.prototype),Object(i.a)(O.prototype,"setFilename",[c.f],Object.getOwnPropertyDescriptor(O.prototype,"setFilename"),O.prototype),Object(i.a)(O.prototype,"upload",[c.f],Object.getOwnPropertyDescriptor(O.prototype,"upload"),O.prototype),Object(i.a)(O.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(O.prototype,"reset"),O.prototype),O),M=new(U=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"page",E,this),Object(r.a)(this,"hasMore",P,this),Object(r.a)(this,"list",k,this),this.limit=10}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.hasMore=!0,h.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){return console.log(e)}))}},{key:"reset",value:function(){this.page=0,this.list=[],this.hasMore=!0}}]),e}(),E=Object(i.a)(U.prototype,"page",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=Object(i.a)(U.prototype,"hasMore",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=Object(i.a)(U.prototype,"list",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(i.a)(U.prototype,"append",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"append"),U.prototype),Object(i.a)(U.prototype,"find",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"find"),U.prototype),Object(i.a)(U.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"reset"),U.prototype),U),I=new(x=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"values",z,this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){f(e.values.username,e.values.password).then((function(e){console.log("\u6ce8\u518c\u6210\u529f"),t(e)})).catch((function(e){D.a.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){b(e.values.username,e.values.password).then((function(e){F.pullUser(),t(e)})).catch((function(e){F.resetUser(),n(e)}))}))}},{key:"logout",value:function(){m(),F.resetUser(),S.reset(),M.reset()}}]),e}(),z=Object(i.a)(x.prototype,"values",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(i.a)(x.prototype,"setUsername",[c.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(i.a)(x.prototype,"setPassword",[c.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(i.a)(x.prototype,"register",[c.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(i.a)(x.prototype,"login",[c.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(i.a)(x.prototype,"logout",[c.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),C=n(0),A=Object(C.createContext)({AuthStore:I,UserStore:F,ImageStore:S,HistoryStore:M});Window.stores={AuthStore:I,UserStore:F,ImageStore:S,HistoryStore:M};var H=function(){return Object(C.useContext)(A)}},99:function(e,t,n){e.exports=n(133)}},[[99,4,5]]]);
//# sourceMappingURL=main.65b470d1.chunk.js.map